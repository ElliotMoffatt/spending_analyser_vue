(function(t){function e(e){for(var o,c,s=e[0],i=e[1],l=e[2],u=0,h=[];u<s.length;u++)c=s[u],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&h.push(r[c][0]),r[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);d&&d(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},a=[];function c(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"3fdfcb86"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=c(t);var l=new Error;a=function(e){i.onerror=i.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,n[1](l)}r[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/spending_analyser_vue/",s.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0199":function(t,e,n){},"2e4e":function(t,e,n){},"375d":function(t,e,n){},3931:function(t,e,n){},"3c94":function(t,e,n){"use strict";n("f8be")},"400a":function(t,e,n){"use strict";n("375d")},"44c4":function(t,e,n){"use strict";n("3931")},"4c53":function(t,e,n){},"4da3":function(t,e,n){"use strict";n("cb1f")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function r(t,e){var n=Object(o["x"])("router-view");return Object(o["q"])(),Object(o["d"])(n)}n("3c94");var a=n("d959"),c=n.n(a);const s={},i=c()(s,[["render",r]]);var l=i,u=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),d={class:"home container"},h={class:"container mt-3"},p=Object(o["f"])('<ul class="nav nav-tabs"><li class="active nav-item"><a class="nav-link" data-toggle="tab" href="#breakdown">Month-by-Month breakdown</a></li><li class="nav-item"><a class="nav-link" data-toggle="tab" href="#summary">Summary</a></li><li class="nav-item"><a class="nav-link" data-toggle="tab" href="#settings">Category settings</a></li><li class="nav-item"><a class="nav-link" data-toggle="tab" href="#fillers">Filler word settings</a></li></ul>',1),b={class:"tab-content"},f={id:"breakdown",class:"tab-pane fade in active"},g={id:"summary",class:"tab-pane fade"},m={id:"settings",class:"tab-pane fade"},y={id:"fillers",class:"tab-pane fade"};function O(t,e,n,r,a,c){var s=Object(o["x"])("FileUpload"),i=Object(o["x"])("MonthList"),l=Object(o["x"])("SummaryVue"),u=Object(o["x"])("CategorySettings"),O=Object(o["x"])("FillerWordsList");return Object(o["q"])(),Object(o["d"])("div",d,[Object(o["h"])(s,{"onUpdate:months":c.updateMonths,descriptionFillerWords:t.descriptionFillerWords,categoryKeywords:t.categoryKeywords},null,8,["onUpdate:months","descriptionFillerWords","categoryKeywords"]),Object(o["h"])("div",h,[p,Object(o["h"])("div",b,[Object(o["h"])("div",f,[Object(o["h"])(i,{months:t.months},null,8,["months"])]),Object(o["h"])("div",g,[Object(o["h"])(l,{months:t.months},null,8,["months"])]),Object(o["h"])("div",m,[Object(o["h"])(u,{categoriesProp:t.categoryKeywords,"onUpdate:categories":c.updateCategorySettings},null,8,["categoriesProp","onUpdate:categories"])]),Object(o["h"])("div",y,[Object(o["h"])(O,{wordsProp:t.descriptionFillerWords,"onUpdate:words":c.updateFillerWords},null,8,["wordsProp","onUpdate:words"])])])])])}n("b0c0");var j={class:"breakdownRow"},v={class:"row"},w={class:"col"},S=Object(o["h"])("h4",null,"Months",-1),C={class:"col"},x={key:0},k={class:"col transactionList"},T={key:0};function F(t,e,n,r,a,c){var s=Object(o["x"])("Month"),i=Object(o["x"])("Category"),l=Object(o["x"])("TransactionList");return Object(o["q"])(),Object(o["d"])("div",j,[Object(o["h"])("div",v,[Object(o["h"])("div",w,[S,(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(n.months,(function(t,e){return Object(o["q"])(),Object(o["d"])(s,{class:"monthList",month:t,isSelected:c.isSelectedMonth(t),key:e,onSetMonth:c.setSelectedMonth},null,8,["month","isSelected","onSetMonth"])})),128))]),Object(o["h"])("div",C,[a.selectedMonth?(Object(o["q"])(),Object(o["d"])("h4",x,Object(o["z"])(a.selectedMonth.title),1)):Object(o["e"])("",!0),(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(c.categoriesWithTransactions,(function(t){return Object(o["q"])(),Object(o["d"])(i,{class:"categoryList",isSelected:c.isSelectedCategory(t),category:t,monthTitle:a.selectedMonth.title,key:t.name,onSetCategory:c.setSelectedCategory},null,8,["isSelected","category","monthTitle","onSetCategory"])})),128))]),Object(o["h"])("div",k,[a.selectedCategory?(Object(o["q"])(),Object(o["d"])("h4",T,Object(o["z"])(a.selectedCategory.name),1)):Object(o["e"])("",!0),a.selectedCategory?(Object(o["q"])(),Object(o["d"])(l,{key:1,transactionList:a.selectedCategory.mergedTransactions},null,8,["transactionList"])):Object(o["e"])("",!0)])])])}n("4de4"),n("b680");var q={class:"h4"};function M(t,e,n,r,a,c){return Object(o["q"])(),Object(o["d"])("div",{class:"month",style:c.monthStyle,onClick:e[1]||(e[1]=function(){return c.emitSelectedMonth&&c.emitSelectedMonth.apply(c,arguments)})},[Object(o["h"])("div",q,[Object(o["g"])(Object(o["z"])(n.month.title)+" ",1),n.month.isComplete?Object(o["e"])("",!0):(Object(o["q"])(),Object(o["d"])("span",{key:0,style:{color:"red",cursor:"help"},title:c.elementTitle},"*",8,["title"]))]),Object(o["h"])("div",null,"Net Income: £"+Object(o["z"])(n.month.netIncome.toFixed(2)),1)],4)}var I={components:{},props:{month:{type:Object,required:!0},isSelected:{type:Boolean,default:!1}},computed:{categoriesWithTransactions:function(){return this.month.categories.filter((function(t){return t.transactions.length>0}))},monthStyle:function(){return{"border-color":this.month.isComplete?"grey":"red","background-color":this.isSelected?"rgba(100, 100, 100, 0.3)":""}},elementTitle:function(){return this.month.isComplete?"":"This month was at the edge of the uploaded data, so likely doesn't include all transactions made in the month. Analysis is misleading"}},methods:{emitSelectedMonth:function(){this.$emit("setMonth",this.month)}}};n("6429");const W=c()(I,[["render",M]]);var A=W,D={class:"row",align:"center"},E={class:"col h5"},L={class:"row",align:"center"},z={class:"col"};function P(t,e,n,r,a,c){return Object(o["q"])(),Object(o["d"])("div",{class:"category",onClick:e[1]||(e[1]=function(){return c.emitSelectedCategory&&c.emitSelectedCategory.apply(c,arguments)}),style:c.categoryStyle},[Object(o["h"])("div",D,[Object(o["h"])("div",E,Object(o["z"])(n.category.name),1)]),Object(o["h"])("div",L,[Object(o["h"])("div",z," Total: £"+Object(o["z"])(n.category.total.toFixed(2)),1)])],4)}var N={components:{},props:{category:{type:Object,required:!0},isSelected:{type:Boolean,default:!1}},data:function(){return{mergeTransactions:!0}},computed:{uniqueCategoryTitle:function(){return this.monthTitle+"-"+this.category.name},categoryStyle:function(){return{"background-color":this.isSelected?"rgba(100, 100, 100, 0.3)":""}}},methods:{emitSelectedCategory:function(){this.$emit("setCategory",this.category)}}};n("a5ef");const K=c()(N,[["render",P]]);var B=K,U={class:"transactionList"};function _(t,e,n,r,a,c){var s=Object(o["x"])("Transaction");return Object(o["q"])(),Object(o["d"])("div",U,[(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(n.transactionList,(function(t,e){return Object(o["q"])(),Object(o["d"])(s,{transaction:t,key:"transaction-"+e},null,8,["transaction"])})),128))])}n("a4d3"),n("e01a");var J={class:"transaction"},H={key:0};function R(t,e,n,r,a,c){return Object(o["q"])(),Object(o["d"])("div",J,[Object(o["h"])("div",null,Object(o["z"])(n.transaction.description)+" : £"+Object(o["z"])(n.transaction.amount.toFixed(2)),1),n.transaction.date?(Object(o["q"])(),Object(o["d"])("div",H,"Date: "+Object(o["z"])(c.formattedDate),1)):Object(o["e"])("",!0)])}n("99af");var $={props:{transaction:{type:Object,required:!0}},data:function(){return{}},computed:{formattedDate:function(){return this.transaction.date?"".concat(this.transaction.date.getDay(),"/").concat(this.transaction.date.getMonth()+1,"/").concat(this.transaction.date.getFullYear()):null}}};n("7cb6");const V=c()($,[["render",R]]);var Y=V,G={components:{Transaction:Y},props:{transactionList:{type:Array,required:!0}}};n("da50");const Q=c()(G,[["render",_]]);var X=Q,Z={components:{Month:A,Category:B,TransactionList:X},props:{months:{type:Array,required:!0}},data:function(){return{selectedMonth:null,selectedCategory:null}},computed:{categoriesWithTransactions:function(){return this.selectedMonth?this.selectedMonth.categories.filter((function(t){return t.transactions.length>0})):[]}},watch:{selectedMonth:function(){this.selectedCategory=null}},methods:{setSelectedMonth:function(t){this.selectedMonth=t},setSelectedCategory:function(t){this.selectedCategory=t},isSelectedMonth:function(t){return null!=this.selectedMonth&&t.title==this.selectedMonth.title},isSelectedCategory:function(t){return null!=this.selectedCategory&&t.name==this.selectedCategory.name}}};n("44c4");const tt=c()(Z,[["render",F]]);var et=tt,nt=Object(o["E"])("data-v-0cfedf83");Object(o["t"])("data-v-0cfedf83");var ot={class:"fileUpload"},rt={class:"row"},at=Object(o["h"])("div",{class:"col-auto"}," Select data source: ",-1),ct={class:"col-auto",style:{"border-right":"1px solid"}},st=Object(o["h"])("div",{class:"col-auto"}," Select .txt or .csv to analyse: ",-1),it={class:"col-auto"};Object(o["r"])();var lt=nt((function(t,e,n,r,a,c){return Object(o["q"])(),Object(o["d"])("div",ot,[Object(o["h"])("div",rt,[at,Object(o["h"])("div",ct,[Object(o["D"])(Object(o["h"])("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.selectedDataSource=e})},[Object(o["h"])("option",{selected:"",value:t.DataSource.Santander},"Santander",8,["value"]),Object(o["h"])("option",{value:t.DataSource.Natwest},"Natwest",8,["value"]),Object(o["h"])("option",{value:t.DataSource.Halifax},"Halifax",8,["value"])],512),[[o["B"],t.selectedDataSource]])]),st,Object(o["h"])("div",it,[Object(o["h"])("input",{type:"file",role:"button",class:"form-control-file",id:"fileToLoad",accept:".txt,.csv",onChange:e[2]||(e[2]=function(t){return c.loadFileAsText()})},null,32)])])])})),ut=(n("159b"),n("fb6a"),n("d4ec")),dt=n("bee2"),ht=(n("b64b"),n("7db0"),"income"),pt="other",bt=["card payment to ","standing order via faster payment to ","direct debit payment to ","bill payment via faster payment to ","bank giro credit ref ","faster payments receipt ","ref "," on ","-"],ft={groceries:["asda","tesco"],bills:["council tax","bt group","esw water","rent","scottishpower","tv licence","tonik"],subscriptions:["netflix","spotify","crunchyroll","funimation"],travel:["nexus travel shop","easyjet","loganair"],gaming:["nintendo","blizzard"],takeaway:["deliveroo","just eat","five guys"],investments:["hl.co.uk"]},gt=function(){function t(e){Object(ut["a"])(this,t),this.name=e,this.total=0,this.transactions=[],this.mergedTransactions=[]}return Object(dt["a"])(t,[{key:"addTransaction",value:function(t){this.transactions.push(t),this.total+=t.amount}},{key:"mergeTransactions",value:function(){this.mergedTransactions=[],this.transactions.forEach((function(t){var e=this.mergedTransactions.find((function(e){return e.description==t.description}));e?e.increaseAmount(t.amount):this.mergedTransactions.push(t)}),this)}}]),t}(),mt=function(){function t(e,n){Object(ut["a"])(this,t),this.transactions=e,this.isComplete=!0,this.setTitle(),this.setNetIncome(),this.categoriseTransactions(n),this.mergeTransactions()}return Object(dt["a"])(t,[{key:"setTitle",value:function(){if(this.transactions.length>0){var t=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],e=this.transactions[0].date;this.title=t[e.getMonth()]+" "+String(e.getFullYear())}else this.title="Undated"}},{key:"setNetIncome",value:function(){this.netIncome=0,this.transactions.forEach((function(t){this.netIncome+=t.amount}),this)}},{key:"categoriseTransactions",value:function(t){var e=Object.keys(t);e.push(pt),e.push(ht),this.categories=[],e.forEach((function(t){this.categories.push(new gt(t))}),this),this.transactions.forEach((function(t){var e=this.categories.find((function(e){return e.name==t.category}));null==e&&(console.log(this.categories),console.log(t.category)),e.addTransaction(t)}),this)}},{key:"mergeTransactions",value:function(){this.categories.forEach((function(t){t.mergeTransactions()}))}}]),t}(),yt=(n("ac1f"),n("1276"),n("5319"),n("498a"),n("b85c")),Ot=(n("caad"),n("2532"),function(){function t(e,n,o){Object(ut["a"])(this,t),this.date=e,this.description=n,this.amount=o}return Object(dt["a"])(t,[{key:"increaseAmount",value:function(t){this.amount+=t}},{key:"tidyDescription",value:function(t){for(var e=this.description.replace(/\s\s+/g," "),n=0;n<t.length;n++)e=e.replaceAll(t[n],"");this.description=e.split(",")[0].replace(/[0-9]/g,"").trim()}},{key:"getCategory",value:function(t){if(this.amount>0)this.category=ht;else{for(var e in t){var n,o=Object(yt["a"])(t[e]);try{for(o.s();!(n=o.n()).done;){var r=n.value;if(this.description.includes(r))return void(this.category=e)}}catch(a){o.e(a)}finally{o.f()}}this.category=pt}}}]),t}()),jt={transactionSeperator:"\n\n",detailSeperator:"\n",rowsToExclude:2};function vt(t){for(var e=t.toLowerCase().replace(/\uFFFD/g," ").replace(/\t/g,"").replace(/\xa0/g," ").split(jt.transactionSeperator),n=0;n<jt.rowsToExclude;n++)e.shift();for(var o=[],r=0;r<e.length;r++)o.push(wt(e[r]));return o}function wt(t){for(var e=t.split(jt.detailSeperator).filter((function(t){return null!=t})),n=0;n<e.length;n++)e[n]=e[n].split(":")[1].trim();var o=St(e[0]),r=e[1],a=parseFloat(e[2]);return new Ot(o,r,a)}function St(t){var e=t.split("/");return new Date(+e[2],e[1]-1,+e[0])}n("466d"),n("d81d");var Ct={transactionSeperator:"\n",detailSeperator:'","',rowsToExclude:3};function xt(t){for(var e=t.toLowerCase().replace(/\uFFFD/g," ").replace(/\t/g,"").replace(/\xa0/g," ").split(Ct.transactionSeperator),n=0;n<Ct.rowsToExclude;n++)e.shift();for(var o=[],r=0;r<e.length;r++){var a=kt(e[r]);a&&o.push(a)}return o}function kt(t){var e=t.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);if(e=e||[],e=e.filter((function(t){return null!=t})).map((function(t){return t.replaceAll('"',"")})),e.length>0){var n=Tt(e[0])||new Date,o=e[2]||"",r=parseFloat(e[3])||0;return new Ot(n,o,r)}}function Tt(t){var e=t.split("/");return new Date(+e[2],e[1]-1,+e[0])}var Ft={transactionSeperator:"\n",detailSeperator:",",rowsToExclude:1};function qt(t){for(var e=t.toLowerCase().replace(/\uFFFD/g," ").replace(/\t/g,"").replace(/\xa0/g," ").split(Ft.transactionSeperator).filter((function(t){return null!=t&&""!=t})),n=0;n<Ft.rowsToExclude;n++)e.shift();for(var o=[],r=0;r<e.length;r++){var a=Mt(e[r]);a&&o.push(a)}return o}function Mt(t){var e=t.split(Ft.detailSeperator).filter((function(t){return null!=t}));if(e.length>0){var n=It(e[0])||new Date,o=e[4]||"",r=parseFloat(e[5])||0,a=parseFloat(e[6])||0,c=a-r;return new Ot(n,o,c)}}function It(t){var e=t.split("/");return new Date(+e[2],e[1]-1,+e[0])}var Wt={Santander:0,Natwest:1,Halifax:2},At={name:"FileUpload",props:{descriptionFillerWords:{type:Array,required:!0},categoryKeywords:{type:Object,required:!0}},data:function(){return{DataSource:Wt,selectedDataSource:Wt.Santander,rawText:"",transactions:[],months:[]}},computed:{},watch:{transactions:function(){this.tidyAndCategoriseTransactions(),this.createMonths()},descriptionFillerWords:function(){this.transactions.length>0&&(this.tidyAndCategoriseTransactions(),this.createMonths())},categoryKeywords:{deep:!0,handler:function(){this.transactions.length>0&&(this.tidyAndCategoriseTransactions(),this.createMonths())}},rawText:{handler:function(t){this.transactions=this.parseData(t)}},selectedDataSource:{handler:function(){this.transactions=this.parseData(this.rawText)}},months:function(){this.$emit("update:months",this.months)}},methods:{loadFileAsText:function(){var t=document.getElementById("fileToLoad").files[0],e=this,n=new FileReader;n.onload=function(t){e.rawText=t.target.result},n.readAsText(t,"ANSI")},parseData:function(t){switch(this.selectedDataSource){case Wt.Santander:return vt(t);case Wt.Natwest:return xt(t);case Wt.Halifax:return qt(t);default:return[]}},tidyAndCategoriseTransactions:function(){this.transactions.forEach((function(t){t.tidyDescription(this.descriptionFillerWords),t.getCategory(this.categoryKeywords)}),this)},findFirstInMonthTransactions:function(){for(var t=[0],e=1;e<this.transactions.length-1;e++)this.transactions[e].date.getMonth()!=this.transactions[e-1].date.getMonth()&&t.push(e);return t[t.length-1]!=this.transactions.length-1&&t.push(this.transactions.length-1),t},createMonths:function(){for(var t=[],e=this.findFirstInMonthTransactions(),n=0;n<e.length-2;n++){var o=this.transactions.slice(e[n],e[n+1]);t.push(new mt(o,this.categoryKeywords))}t.push(new mt(this.transactions.slice(e[e.length-1]),this.categoryKeywords)),this.months=t,this.months[0].isComplete=!1,this.months[this.months.length-1].isComplete=!1}},mounted:function(){}};n("849c");const Dt=c()(At,[["render",lt],["__scopeId","data-v-0cfedf83"]]);var Et=Dt,Lt={class:"fillerWordsList"},zt=Object(o["h"])("p",null,"Add words/phrases to this list to remove filler words from transaction descriptions. NB: whitespace matters",-1),Pt={class:"input-group mb-3"},Nt=Object(o["h"])("input",{type:"text",class:"form-control",id:"newWord"},null,-1),Kt={class:"input-group-append"};function Bt(t,e,n,r,a,c){var s=this;return Object(o["q"])(),Object(o["d"])("div",Lt,[zt,(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(a.words,(function(t,e){return Object(o["q"])(),Object(o["d"])("div",{class:"input-group mb-1",key:e},[(Object(o["q"])(),Object(o["d"])("input",{type:"text",class:"form-control",value:t,key:e,onChange:function(t){return c.updateWord(e,s.value)}},null,40,["value","onChange"])),(Object(o["q"])(),Object(o["d"])("div",{class:"input-group-append",key:e},[(Object(o["q"])(),Object(o["d"])("button",{key:e,class:"btn btn-outline-secondary",type:"button",onClick:function(t){return c.removeWord(e)}},"×",8,["onClick"]))]))])})),128)),Object(o["h"])("div",Pt,[Nt,Object(o["h"])("div",Kt,[Object(o["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=function(t){return c.addWord()})},"Add phrase")])])])}n("a434");var Ut={props:{wordsProp:{type:Array,required:!0}},data:function(){return{words:this.wordsProp}},watch:{wordsProp:function(t){this.words=t},words:function(t){t!=this.wordsProp&&this.$emit("update:words",t)}},methods:{removeWord:function(t){this.words.splice(t,1)},updateWord:function(t,e){this.words[t]=e},addWord:function(){this.words.push(document.getElementById("newWord").value),document.getElementById("newWord").value=""}}};n("5d2d");const _t=c()(Ut,[["render",Bt]]);var Jt=_t,Ht={class:"categorySettings row"},Rt={class:"col col-4"},$t={class:"list-group categoriesList"},Vt={class:"input-group mt-1"},Yt=Object(o["h"])("input",{type:"text",class:"form-control",id:"newCategory",placeholder:"Add new category"},null,-1),Gt={class:"input-group-append"},Qt={key:0,class:"col col-8"},Xt={class:"input-group m-2"},Zt={class:"input-group-append"},te={class:"input-group-append"},ee=Object(o["h"])("p",{class:"mt-4"},"Add words which identify a transaction as belonging to this category",-1),ne={class:"input-group mb-3"},oe=Object(o["h"])("input",{type:"text",class:"form-control",id:"newWord"},null,-1),re={class:"input-group-append"};function ae(t,e,n,r,a,c){var s=this;return Object(o["q"])(),Object(o["d"])("div",Ht,[Object(o["h"])("div",Rt,[Object(o["h"])("ul",$t,[(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(Object.keys(a.categories),(function(t){return Object(o["q"])(),Object(o["d"])("li",{class:"list-group-item",onClick:function(e){return a.selectedCategory=t},key:t.name,style:c.categoryListItemStyle(t)},Object(o["z"])(t),13,["onClick"])})),128))]),Object(o["h"])("div",Vt,[Yt,Object(o["h"])("div",Gt,[Object(o["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=function(t){return c.addCategory()})},"Add")])])]),a.selectedCategory?(Object(o["q"])(),Object(o["d"])("div",Qt,[Object(o["h"])("div",Xt,[Object(o["h"])("input",{type:"text",class:"form-control",id:"renameCategory",value:a.selectedCategory},null,8,["value"]),Object(o["h"])("div",Zt,[Object(o["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[2]||(e[2]=function(t){return c.renameCategory()})},"Rename category")]),Object(o["h"])("div",te,[Object(o["h"])("button",{class:"btn btn-outline-danger inline-flex",type:"button",onClick:e[3]||(e[3]=function(t){return c.deleteCategory()})},"Delete category")])]),ee,(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(a.categories[a.selectedCategory],(function(t,e){return Object(o["q"])(),Object(o["d"])("div",{class:"input-group mb-1",key:e},[(Object(o["q"])(),Object(o["d"])("input",{type:"text",class:"form-control",value:t,key:e,onChange:function(t){return c.updateWord(e,s.value)}},null,40,["value","onChange"])),(Object(o["q"])(),Object(o["d"])("div",{class:"input-group-append",key:e},[(Object(o["q"])(),Object(o["d"])("button",{key:e,class:"btn btn-outline-secondary",type:"button",onClick:function(t){return c.removeWord(e)}},"×",8,["onClick"]))]))])})),128)),Object(o["h"])("div",ne,[oe,Object(o["h"])("div",re,[Object(o["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[4]||(e[4]=function(t){return c.addWord()})},"Add phrase")])])])):Object(o["e"])("",!0)])}var ce={props:{categoriesProp:{type:Object,required:!0}},data:function(){return{categories:this.categoriesProp,selectedCategory:null}},watch:{categoriesProp:{deep:!0,handler:function(t){this.categories=t}},categories:{deep:!0,handler:function(t){t!=this.categoriesProp&&this.$emit("update:categories",t)}}},methods:{categoryListItemStyle:function(t){return{"background-color":t==this.selectedCategory?"rgba(100, 100, 100, 0.3)":""}},addCategory:function(){this.categories[document.getElementById("newCategory").value]=[],this.selectedCategory=document.getElementById("newCategory").value,document.getElementById("newCategory").value=""},deleteCategory:function(){delete this.categories[this.selectedCategory],this.selectedCategory=null},renameCategory:function(){var t=document.getElementById("renameCategory").value;this.categories[t]=this.categories[this.selectedCategory],delete this.categories[this.selectedCategory],this.selectedCategory=t},addWord:function(){this.categories[this.selectedCategory].push(document.getElementById("newWord").value),document.getElementById("newWord").value=""},removeWord:function(t){this.categories[this.selectedCategory].splice(t,1)},updateWord:function(t,e){this.categories[this.selectedCategory][t]=e}}};n("400a");const se=c()(ce,[["render",ae]]);var ie=se,le={class:"summary"},ue={class:"table table-striped"},de=Object(o["h"])("thead",null,[Object(o["h"])("tr",null,[Object(o["h"])("th",null,"Category"),Object(o["h"])("th",null,"Average"),Object(o["h"])("th",null,"Max"),Object(o["h"])("th",null,"Min")])],-1),he={key:0,class:"incomeRow table-success"},pe={key:1,class:"incomeRow table-danger"},be=Object(o["h"])("td",null,"Average total outgoings",-1),fe=Object(o["h"])("td",null,null,-1),ge=Object(o["h"])("td",null,null,-1),me={key:2,class:"incomeRow table-info"},ye=Object(o["h"])("td",null,"Average Net income",-1),Oe=Object(o["h"])("td",null,null,-1),je=Object(o["h"])("td",null,null,-1);function ve(t,e,n,r,a,c){return Object(o["q"])(),Object(o["d"])("div",le,[Object(o["h"])("table",ue,[de,Object(o["h"])("tbody",null,[(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(c.summariesExceptIncome,(function(t){return Object(o["q"])(),Object(o["d"])("tr",{key:t.name},[Object(o["h"])("td",null,Object(o["z"])(t.name),1),Object(o["h"])("td",null,Object(o["z"])(t.average),1),Object(o["h"])("td",null,Object(o["z"])(t.min),1),Object(o["h"])("td",null,Object(o["z"])(t.max),1)])})),128)),c.incomeSummary?(Object(o["q"])(),Object(o["d"])("tr",he,[Object(o["h"])("td",null,Object(o["z"])(c.incomeSummary.name),1),Object(o["h"])("td",null,Object(o["z"])(c.incomeSummary.average),1),Object(o["h"])("td",null,Object(o["z"])(c.incomeSummary.max),1),Object(o["h"])("td",null,Object(o["z"])(c.incomeSummary.min),1)])):Object(o["e"])("",!0),c.totalAverageOutgoings?(Object(o["q"])(),Object(o["d"])("tr",pe,[be,Object(o["h"])("td",null,Object(o["z"])(c.totalAverageOutgoings),1),fe,ge])):Object(o["e"])("",!0),c.averageNetIncome?(Object(o["q"])(),Object(o["d"])("tr",me,[ye,Object(o["h"])("td",null,Object(o["z"])(c.averageNetIncome),1),Oe,je])):Object(o["e"])("",!0)])])])}var we=function(){function t(e){Object(ut["a"])(this,t),this.name=e,this.total=0,this.count=0,this.average=0,this.max=null,this.min=null}return Object(dt["a"])(t,[{key:"analyseInstance",value:function(t){this.total+=t.total,this.count++,this.average=(this.total/this.count).toFixed(2),null===this.max?this.max=t.total.toFixed(2):this.max=Math.max(this.max,t.total).toFixed(2),null===this.min?this.min=t.total.toFixed(2):this.min=Math.min(this.min,t.total).toFixed(2)}}]),t}(),Se={props:{months:{type:Array,required:!0}},data:function(){return{summaries:[]}},computed:{includeIncompleteMonths:function(){return 0==this.months.filter((function(t){return t.isComplete})).length},monthsToInclude:function(){return this.includeIncompleteMonths?this.months:this.months.filter((function(t){return t.isComplete}))},summariesExceptIncome:function(){return this.summaries.filter((function(t){return"income"!=t.name}))},incomeSummary:function(){return this.summaries.find((function(t){return"income"==t.name}))},totalAverageOutgoings:function(){return 0==this.summariesExceptIncome.length?0:this.summariesExceptIncome.map((function(t){return parseFloat(t.average)})).reduce((function(t,e){return t+e})).toFixed(2)},averageNetIncome:function(){return 0==this.summaries.length?0:this.summaries.map((function(t){return parseFloat(t.average)})).reduce((function(t,e){return t+e})).toFixed(2)}},watch:{monthsToInclude:{deep:!0,handler:function(){this.getSummaries()}}},methods:{getSummaries:function(){this.summaries=[],this.monthsToInclude[0].categories.forEach((function(t){this.summaries.push(new we(t.name))}),this),this.monthsToInclude.forEach((function(t){t.categories.forEach((function(t){var e=this.summaries.find((function(e){return e.name==t.name}));null!=e&&e.analyseInstance(t)}),this)}),this)}}};n("7594");const Ce=c()(Se,[["render",ve]]);var xe=Ce,ke={name:"Home",components:{MonthList:et,FileUpload:Et,FillerWordsList:Jt,CategorySettings:ie,SummaryVue:xe},data:function(){return{months:[],summary:null,includeIncompleteMonthsInSummary:!1,descriptionFillerWords:bt,categoryKeywords:ft}},computed:{},watch:{descriptionFillerWords:function(){this.updateSettingsInStorage()},categoryKeywords:{deep:!0,handler:function(){this.updateSettingsInStorage()}}},methods:{updateMonths:function(t){this.months=t},getSettingsFromStorage:function(){null!==localStorage.getItem("spendingAnalyserDescriptionFillerWords")&&(this.descriptionFillerWords=JSON.parse(localStorage.getItem("spendingAnalyserDescriptionFillerWords"))),null!==localStorage.getItem("spendingAnalyserCategoryKeywords")&&(this.categoryKeywords=JSON.parse(localStorage.getItem("spendingAnalyserCategoryKeywords")))},updateSettingsInStorage:function(){localStorage.setItem("spendingAnalyserDescriptionFillerWords",JSON.stringify(this.descriptionFillerWords)),localStorage.setItem("spendingAnalyserCategoryKeywords",JSON.stringify(this.categoryKeywords))},updateFillerWords:function(t){this.descriptionFillerWords=t},updateCategorySettings:function(t){this.categoryKeywords=t}},mounted:function(){this.getSettingsFromStorage()}};n("4da3");const Te=c()(ke,[["render",O]]);var Fe=Te,qe=[{path:"/",name:"Home",component:Fe},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Me=Object(u["a"])({history:Object(u["b"])(),routes:qe}),Ie=Me;Object(o["c"])(l).use(Ie).mount("#app")},"5d2d":function(t,e,n){"use strict";n("0199")},6429:function(t,e,n){"use strict";n("9ef8")},7594:function(t,e,n){"use strict";n("e153")},"7cb6":function(t,e,n){"use strict";n("2e4e")},"849c":function(t,e,n){"use strict";n("4c53")},"9ef8":function(t,e,n){},a220:function(t,e,n){},a5ef:function(t,e,n){"use strict";n("a220")},b42e:function(t,e,n){},cb1f:function(t,e,n){},da50:function(t,e,n){"use strict";n("b42e")},e153:function(t,e,n){},f8be:function(t,e,n){}});
//# sourceMappingURL=app.00af99f8.js.map